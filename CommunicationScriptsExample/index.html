<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>Small user script - Bots EDI Translator Documentation</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Small user script";
    var mkdocs_page_input_path = "CommunicationScriptsExample.md";
    var mkdocs_page_url = "/CommunicationScriptsExample/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Bots EDI Translator Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Home</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Get started with bots</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../StartIntroduction/">Introduction</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Installation</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../StartInstallProcedure/">Installation</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../StartInstallWindows/">Installation Windows</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../StartInstalllinux/">Installation Linux</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../StartInstallFaq/">Installation FAQ</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../StartInstallDependencies/">Dependencies</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../StartGetBotsRunning/">Get bots running</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Tutorial</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../StartMyFirstPlugin/">Introduction</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../StartMyFirstPluginResults/">View results</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../StartMyFirstPluginSetup/">Walk through setup</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../StartMyFirstPluginDepth/">What happened</a>
        
    </li>

        
    </ul>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Guide for bots-monitor</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../MonitorIntroduction/">Introduction</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../MonitorRereceive/">How to rereceive</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Configuration</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../OverviewConfiguration/">Overview</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../ConfigurationHow/">How to do configuration</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../ConfigurationDIY/">DIY step by step</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Route</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../RoutesIntroduction/">Introduction</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../RoutesComposite/">Composite routes</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../RoutesPass/">PassThrough (no translation)</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Route scripting</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../RoutesScripts/">Introduction</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../RouteScriptsOverviewExits/">Overview Exit points</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../RouteScriptsExample/">Preprocessing recipes</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../RouteScriptsExampleWholeRoute/">Take over whole route</a>
        
    </li>

        
    </ul>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Channel/communication</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../ChannelsIntroduction/">Introduction</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../Filenames/">Filenames</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../ChannelsDatabase/">Database communication</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Channel scripting</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../ChannelsScripting/">Introduction</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Small user script</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#examples-for-small-user-exit">Examples for small user exit</a></li>
                
                    <li><a class="toctree-l4" href="#filter-email-attachments">Filter email attachments</a></li>
                
                    <li><a class="toctree-l4" href="#set-email-subject">Set email subject</a></li>
                
                    <li><a class="toctree-l4" href="#name-archive-file-same-as-input-file">Name archive file same as input file</a></li>
                
                    <li><a class="toctree-l4" href="#set-the-archive-path">Set the archive path</a></li>
                
                    <li><a class="toctree-l4" href="#partners-in-the-output-file-name">Partners in the output file name</a></li>
                
                    <li><a class="toctree-l4" href="#name-the-output-file-from-botskey">Name the output file from botskey</a></li>
                
                    <li><a class="toctree-l4" href="#name-the-output-file-same-as-input-file">Name the output file same as input file</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../CommunicationScriptsSubclass/">Subclassing</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../CommunicationScriptsType/">communication type 'communicationscript'</a>
        
    </li>

        
    </ul>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../ChannelPortNumbers/">Channel port numbers</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../ChannelFileLock/">Safe file writing/locking</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Translation</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../TranslationIntroduction/">Introduction</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../TranslationDetail/">How translations work</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../TranslationRules/">What translation when?</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../TranslationperPartner/">Partner specific translations</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../TranslationperPartnerExtended/">Organize partner specific translations</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../TranslationAlt/">Chained translations (alt)</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../TranslationVersions/">Multiple versions</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Mapping Scripts</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../MappingIntroduction/">Introduction</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../MappingHowMappingWorks/">How mapping works</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../MappingGet/">Get from message</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../MappingPut/">Put in message</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../MappingFunction/">Div mapping functions</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../MappingCcode/">Code conversion</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../MappingPartnerLookup/">Partner look-up</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../MappingCalculate/">Calculate and count</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../MappingPersist/">Persist (store data)</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../MappingEAN/">EAN/UCC check digits</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../MappingChangedelete/">Change and delete</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Grammars</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../GrammarsIntroduction/">Introduction</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../GrammarsHowToGet/">How to get grammars</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../GrammarsSyntax/">Syntax parameters</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../GrammarsStructure/">Structure</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../GrammarsRecorddefs/">Recorddefs</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../GrammarsNextmessage/">Nextmessage</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../GrammarsNextmessageblock/">Nextmessageblock</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../GrammarsPartnerSyntax/">Partner dependent syntax</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../ConfigurationCharset/">Edifact charsets</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../XMLnamespace/">XML namespaces</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../ConfigurationBotskey/">Document View (botskey)</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>User Scripting</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../UserScriptingIntroduction/">Introduction</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../RouteScriptsExampleBotsEngine/">Bots engine scripting</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Confirmations/">Confirmations/acknowledgements</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Split/merge/envelope</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../ConfigurationSplitMerge/">Introduction</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../ConfigurationSplit/">Split edi files</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../ConfigurationMerge/">Merge/envelope edi files</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../EnvelopeScripting/">Envelope scripting</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Edi partners</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../ConfigurationPartners/">Introduction</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../TranslationperPartner/">Partner specific translations</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../TranslationperPartnerExtended/">Organize partner specific translations</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../GrammarsPartnerSyntax/">Partner dependent syntax</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../ConfigurationPartnerGroup/">Partner groups</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../ChannelsRecipes/">Email addresses</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../MappingPartnerLookup/">Partner look-up</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../EnvelopeScripting/">Envelope scripting</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Charsets/">Character-sets/unicode</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Debug/">How to debug</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Plugins</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../PluginIntroduction/">Introduction</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../PluginInstall/">Install a plugin</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../PluginList/">Plugins at sourceforge</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../PluginGenerate/">Make a plugin</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../PluginDetail/">Plugin details</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Deployment and usage</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../DeploymentIntroduction/">Introduction</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../DeploymentEngineOverview/">Running bots-engine</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../DeploymentEngine/">Schedule bots-engine</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../Jobqueue/">Job Queue</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../DirMonitor/">Directory Monitor</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../DeploymentEngineReturnCode/">Return codes</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../DeploymentHandleErrors/">Handle production errors</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../DeploymentErrorReports/">Email notification for errors</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Archiving/">Archiving of EDI files</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../DaemonProcesses/">Run as service/daemon</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../LinuxDaemons/">Linux Daemons</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../WindowsServices/">Windows Services</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Multiple environments</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../DeploymentMultipleEnvironments/">Introduction</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../DeploymentMultipleEnvironmentsVirtual/">Virtual environments</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../DeploymentAdvanced/">Advanced Deployment</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../UserSecurity/">User Rights</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../DeploymentHttps/">Bots-monitor over HTTPS</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../DeploymentWebserver/">Use Apache2</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../DeploymentOtherDatabase/">Use MySQL/PostgreSQL</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../DeploymentAS2/">Using AS2 with Bots</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../DeploymentEnv/">Configuration change management</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../DeploymentAcceptance/">Isolated acceptance test</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../DeploymentAutopush/">Push test->production</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../DeploymentTestSet/">Build test-set</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Performance/">Performance/big volumes</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Troubleshooting/">Troubleshooting FAQ</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Overview</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../OverviewIntroduction/">Introduction</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../BotsName/">The name "Bots"</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../OverviewDetail/">Technical overview</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../OverviewDirectoryLayout/">Directories and files</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../StartConfigurationFiles/">Configuration files</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../Glossary/">Glossary of terms</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Changes and migrate</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../Migrate/">Introduction</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../Migrate320/">Bots 3.2.0</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../V320changes/">Changes</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../Migrate310/">Bots 3.1.0</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../V310changes/">Changes</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../V310migrate/">Migrate</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../Migrate300/">Bots 3.0.0</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../V300changes/">Changes</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../V300migrate/">Migrate</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../V300rcchanges/">Changes 3.0.0rc/3.0.0</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../Migrate220/">Changes/migrate 2.2.0</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../Migrate210/">Changes/migrate 2.1.0</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../MigrateKidGenshi/">Migrate Kid to Genshi</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../MigrateDjango/">Migrate Django versions</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../MigrateDatabase/">Migrate database</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Tutorials</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../TutorialHome/">Introduction</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../TutorialEdiBasics/">EDI Basics</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../OdooIntegration/">Integration with Odoo/OpenERP</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../NewToPython/">New to python?</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Links/">External reference links</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../UsefulTools/">Useful Tools</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Bots EDI Translator Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Channel/communication &raquo;</li>
        
      
        
          <li>Channel scripting &raquo;</li>
        
      
    
    <li>Small user script</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="examples-for-small-user-exit">Examples for small user exit</h2>
<h4 id="filter-email-attachments">Filter email attachments</h4>
<p>Some edi-partners send signatures etc in their email. Script does a
simple check if incoming attachment starts with 'UNB'. (Note: Bots
treats any text in the email body as another "attachment")</p>
<pre><code>def accept_incoming_attachment(channeldict,ta,charset,content,contenttype,*args,**kwargs):
    if 'UNB' in content[0:50]:
        return True   #attachments is OK
    else:
        return False  #skip this attachment
</code></pre>
<h4 id="set-email-subject">Set email subject</h4>
<p>Some edi-partners send signatures etc in their email.<br />
By default bots uses a number for emails.<br />
Sometimes you want a more meaningfull subject.</p>
<pre><code>def subject(channeldict,ta,subjectstring,content,*args,**kwargs):
    ta.synall()        #needed to get access to attributes of object ta (eg ta.frompartner)
    return 'EDI messages from ' + ta.frompartner + '_' + subjectstring
</code></pre>
<h4 id="name-archive-file-same-as-input-file">Name archive file same as input file</h4>
<p>Not needed for bots 3.<strong>; do this via setting in bots.ini
</strong></p>
<pre><code>import os
import bots.botslib as botslib

def archivename(channeldict,idta,filename,*args,**kwargs):
     taparent=botslib.OldTransaction(idta=idta)
     ta_list = botslib.trace_origin(ta=taparent,where={'status':EXTERNIN})
     archivename = os.path.basename(ta_list[0].filename)
     return archivename
</code></pre>
<h4 id="set-the-archive-path">Set the archive path</h4>
<p>Path root is set in channel.<br />
Add sub-dir per date, then sub-dir per channel under it.</p>
<pre><code>import time
import bots.botslib as botslib

def archivepath(channeldict,*args,**kwargs):
    archivepath = botslib.join(channeldict['archivepath'],time.strftime('%Y%m%d'),channeldict['idchannel'])
    return archivepath
</code></pre>
<h4 id="partners-in-the-output-file-name">Partners in the output file name</h4>
<p>Not needed for bots 3.<strong>; do this via file name in GUI</strong></p>
<pre><code>def filename(channeldict,filename,ta,*args,**kwargs):
    ta.synall()        #needed to get access to attributes of object ta (eg ta.frompartner)
    return ta.frompartner + '_' + ta.topartner + '_' + filename
</code></pre>
<h4 id="name-the-output-file-from-botskey">Name the output file from botskey</h4>
<p>botskey can be set in grammar or mapping, eg. from customer's order
number.<br />
If no botskey is found, the default file naming method will be used.<br />
Syntax must contain 'merge':False.<br />
Not needed for bots 3.<strong>; do this via file name in GUI.</strong></p>
<pre><code>def filename(channeldict,filename,ta,*args,**kwargs):
    ta.synall()
    if ta.botskey:
        return filename + ta.botskey
    else:
        return filename
</code></pre>
<h4 id="name-the-output-file-same-as-input-file">Name the output file same as input file</h4>
<p>Syntax must contain 'merge':False.<br />
Not needed for bots 3.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../CommunicationScriptsSubclass/" class="btn btn-neutral float-right" title="Subclassing">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../ChannelsScripting/" class="btn btn-neutral" title="Introduction"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../ChannelsScripting/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../CommunicationScriptsSubclass/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
